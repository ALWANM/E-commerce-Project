DROP TABLE `user` ;
DROP TABLE `category` ;
DROP TABLE `supplier` ;
DROP TABLE `shippinginfo` ;
DROP TABLE `payment` ;
DROP TABLE `product` ;
DROP TABLE `order` ;
DROP TABLE `carteitem` ;
CREATE TABLE IF NOT EXISTS  `user` (
	IDUSER INT(5) NOT NULL AUTO_INCREMENT,
	FIRSTNAME VARCHAR(10),
	LASTNAME VARCHAR(10),
	ROLE VARCHAR(10),
	PASSWORD VARCHAR(10),
	MAIL VARCHAR(25),
	PHONENUMBER VARCHAR(15),
	DATEOFBIRTH DATE,
	ADDRESS VARCHAR(255),
	POSTALCODE VARCHAR(10),
	TOWN VARCHAR(25),
	COUNTRY VARCHAR(15),
	DATEOPEN DATE,
	GENDER VARCHAR(15),
	CONSTRAINT PK_USER PRIMARY KEY(IDUSER),
	UNIQUE (MAIL),
	INDEX login (MAIL, PASSWORD)
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS category(
	IDCATEGORY INT(5) NOT NULL AUTO_INCREMENT,
	NAME VARCHAR(25),
	DESCRIPTION VARCHAR(200),
	CONSTRAINT PK_CATEGORY PRIMARY KEY(IDCATEGORY)
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

 CREATE TABLE IF NOT EXISTS supplier (
	SUPPLIERID INT(5) NOT NULL AUTO_INCREMENT,
	FIRSTNAME VARCHAR(10) ,
	LASTNAME VARCHAR(10) ,
	MAIL VARCHAR(25),
	PHONENUMBER VARCHAR(15),
	DATEOFBIRTH DATE ,
	ADDRESS VARCHAR(255),
	POSTALCODE VARCHAR(10),
	TOWN VARCHAR(25),
	COUNTRY VARCHAR(15),
	CONSTRAINT PK_SUPPLIER PRIMARY KEY(SUPPLIERID)
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS shippinginfo(
	SHIPPINGID INT(5) NOT NULL AUTO_INCREMENT,
	SHIPPINGADDRESS VARCHAR(255) ,
	SHIPPINGPOSTALCODE VARCHAR(10),
	SHIPPINGTOWN VARCHAR(10) ,
	SHIPPINGCOUNTRY VARCHAR(10) ,
	SHIPPINGSTATUS VARCHAR(10) ,
	RECIPIENT VARCHAR(15) , 
	CONSTRAINT PK_SHIPPINGINFO PRIMARY KEY(SHIPPINGID)
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS payment (
	PAYMENTID INT(5) NOT NULL AUTO_INCREMENT,
	PAYMENTDATE DATE NOT NULL,
	METHODOFPAYMENT VARCHAR(15) NOT NULL,
	CONSTRAINT PK_PAYMENT PRIMARY KEY(PAYMENTID)
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
 
CREATE TABLE IF NOT EXISTS product (
	PRODUCTID INT(5) NOT NULL AUTO_INCREMENT,
	REFERENCE VARCHAR(5),
	NAME VARCHAR(10) ,
	DESCRIPTION VARCHAR(255) ,
	IDCATEGORY INT(5) ,
	PRICE FLOAT ,
	VAT FLOAT ,
	QUANTITYSTOCK INT(5) ,
	SIZE INT(5) ,
	COLOR INT(5) ,
	PICTURE INT(5) ,
	SUPPLIERID INT(5),
	CONSTRAINT PK_PRODUCT PRIMARY KEY(PRODUCTID),
	CONSTRAINT FK_CATEGORY FOREIGN KEY (IDCATEGORY) REFERENCES category(IDCATEGORY) ,
	CONSTRAINT FK_SUPPLIER FOREIGN KEY (SUPPLIERID) REFERENCES supplier(SUPPLIERID)  
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `order`(
	ORDERID INT(5) NOT NULL AUTO_INCREMENT,
	IDUSER INT(5) ,
	DATE DATE ,
	AMOUNT FLOAT ,
	SHIPPINGINFOID INT(5) ,
	PAYMENTID INT(5) ,
	CONSTRAINT PK_ORDER PRIMARY KEY (ORDERID),
	CONSTRAINT FK_USER FOREIGN KEY(IDUSER) REFERENCES `user`(IDUSER),
	CONSTRAINT FK_SHIPPINGINFO FOREIGN KEY(SHIPPINGINFOID) REFERENCES shippinginfo(SHIPPINGID),
	CONSTRAINT FK_PAYMENT FOREIGN KEY(PAYMENTID) REFERENCES payment(PAYMENTID)
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

 
CREATE TABLE IF NOT EXISTS carteitem(
	CARTEITEMID INT(5) NOT NULL AUTO_INCREMENT,
	ORDERID INT(5),
	PRODUCTID INT(5),
	QUANTITY INT(5),
	CONSTRAINT PK_LINEPRODUCT PRIMARY KEY(CARTEITEMID),
	CONSTRAINT FK_PRODUCT FOREIGN KEY(PRODUCTID) REFERENCES product(PRODUCTID),
	CONSTRAINT FK_ORDER FOREIGN KEY(ORDERID) REFERENCES `order`(ORDERID)
)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;


INSERT INTO `category` (`IDCATEGORY`, `NAME`, `DESCRIPTION`) VALUES
(1, 'Monitor', 'Monitor'),
(2, 'Motherboard', 'Motherboard'),
(3, 'CPU', 'Microprocessor'),
(4, 'RAM', 'Main Memory'),
(5, 'Expansion cards', 'Expansion cards'),
(6, 'Power supply unit', 'Power supply unit'),
(7, 'Optical disc drive', 'Optical disc drive'),
(8, 'HDD', 'Hard disk drive'),
(9, 'Keyboard', 'Keyboard'),
(10, 'Mouse', 'Mouse');

INSERT INTO `user` (`IDUSER`, `FIRSTNAME`, `LASTNAME`, `ROLE`, `PASSWORD`, `MAIL`, `PHONENUMBER`, `DATEOFBIRTH`, `ADDRESS`, `POSTALCODE`, `TOWN`, `COUNTRY`, `DATEOPEN`, `GENDER`) VALUES
(1, 'ADMIN', 'ADMIN', 'ADMIN', 'ADMIN', 'ADMIN@ADMIN.FR', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'male'),
(2, 'USER', 'USER', 'USER', 'USER', 'USER@USER.FR', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(3, 'WORKER', 'WORKER', 'WORKER', 'WORKER', 'WORKER@WORKER.FR', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);

INSERT INTO `supplier` (`SUPPLIERID`, `FIRSTNAME`, `LASTNAME`, `MAIL`, `PHONENUMBER`, `DATEOFBIRTH`, `ADDRESS`, `POSTALCODE`, `TOWN`, `COUNTRY`) VALUES
(3, 'ASUS', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(4, 'Gigabyte', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);

 
INSERT INTO `shippinginfo` (`SHIPPINGID`, `SHIPPINGADDRESS`, `SHIPPINGPOSTALCODE`, `SHIPPINGTOWN`, `SHIPPINGCOUNTRY`, `SHIPPINGSTATUS`, `RECIPIENT`) VALUES
(1, 'france', NULL, NULL, NULL, NULL, NULL);

INSERT INTO `product` (`PRODUCTID`, `REFERENCE`, `NAME`, `DESCRIPTION`, `IDCATEGORY`, `PRICE`, `VAT`, `QUANTITYSTOCK`, `SIZE`, `COLOR`, `PICTURE`, `SUPPLIERID`) VALUES
(2, 'B250', 'ASUS B250 ', 'Carte mere\r\n', 2, 200, 10, 91, 1, 1, 2, 3),
(3, 'H110', 'ASUS H110', 'CARTE MERE', 2, 90, 10, 82, 1, 1, 3, 3),
(4, 'X470', 'X470', 'CARTE MERE', 2, 230, 10, 91, 1, 1, 4, 4);

INSERT INTO `payment` (`PAYMENTID`, `PAYMENTDATE`, `METHODOFPAYMENT`) VALUES
(1, '2019-01-06', 'CB');

INSERT INTO `order` (`ORDERID`, `IDUSER`, `DATE`, `AMOUNT`, `SHIPPINGINFOID`, `PAYMENTID`) VALUES
(1, 1, '2019-01-06', 200, 1, 1),
(2, 2, '2019-01-06', 90, 1, 1),
(3, 3, '2019-01-06', 230, 1, 1),
(4, 3, '2019-01-08', 1040, 1, 1),
(5, 3, '2019-01-16', 720, 1, 1);


INSERT INTO `carteitem` (`CARTEITEMID`, `ORDERID`, `PRODUCTID`, `QUANTITY`) VALUES
(1, 1, 2, 1),
(2, 2, 3, 1),
(3, 3, 4, 1),
(4, 4, 2, 2),
(5, 4, 3, 2),
(6, 4, 4, 2);